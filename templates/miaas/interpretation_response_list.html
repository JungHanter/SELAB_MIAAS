{% if not user_session or user_session.user_type != 'physician' %}
    <script type="text/javascript">
        location.replace({{ "'" }}{% url 'miaas:index' %}{{ "'" }});
    </script>
{% endif %}

{% load staticfiles %}
{% load my_filters %}

{% include 'miaas/template_header.html' %}

<!-- custom css -->


{% include 'miaas/template_nav_physician.html' %}

<div class="container">
    <section class="section section-default">
        <div class="row">
            <div class="col-xs-12 col-title">
                <h2 class="text-primary">Request List for Writing</h2>
            </div>

            <div class="col-xs-12 col-table">
                {% if intpr_response.intpr_response_list %}
                    <div class="table-container row">
                        <div class="table-title col-xs-12">Interpretation Request List</div>
                        <table class="table table-striped table-hover col-xs-12">
                            <thead>
                            <td>Request Date</td>
                            <td>Response Date</td>
                            <td>Patient ID</td>
                            <td>Request Subject</td>
                            <td>Message</td>
                            <td>Image Subject</td>
                            <td>Image Type</td>
                            <td>Interpretation Level</td>
                            <td>Status</td>
                            </thead>
                            <tbody>
                            {% for response_info in intpr_response.intpr_response_list %}
                                <tr {% if response_info.status == 1 %} onclick="javascript: location.href='{% url 'miaas:interpretation_write' response_info.request_id %}';" {% endif %}>
                                    <td>{{ response_info.request_date|datetime_string }}</td>
                                    <td>{{ response_info.response_date|datetime_string }}</td>
                                    <td>{{ response_info.patient_id }}</td>
                                    <td>{{ response_info.request_subject }}</td>
                                    <td>{{ response_info.request_message }}</td>
                                    <td>{{ response_info.image_subject }}</td>
                                    <td>{{ response_info.image_type }}</td>
                                    <td>{{ response_info.level }}</td>
                                    <td class="bold interpretation-status-{{ response_info.status }}">{{ response_info.status|get_interpretation_status }}</td>
                                </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                        <div class="col-xs-12 text-center table-page-container">
                            {% for page_num in intpr_response.start_page|get_range_from_to2:intpr_response.end_page %}
                                {% if page_num == intpr_response.now_page %}
                                    <b>
                                {% endif %}
                            <a class="table-page-number" href="?page={{ page_num }}">{{ page_num }}</a>
                                {% if page_num == intpr_response.now_page %}
                                    </b>
                                {% endif %}
                            {% endfor %}
                        </div>
                    </div>
                {% else %}
                    <div class="table-nodata">
                        <h4 class="text-danger">No requests.</h4>
                        <p>You can select a request for writing interpretation</p>
                        <a class="btn btn-default" href="{% url 'miaas:interpretation_search' %}" type="button">Select a Request</a>
                    </div>
                {% endif %}
            </div>
        </div>
    </section>
</div>

{% include 'miaas/template_footer.html' %}

<!-- custom javascript -->


</body>
</html>

