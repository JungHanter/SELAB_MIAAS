{% if not user_session or user_session.user_type != 'physician' %}
<script type="text/javascript">
location.replace({{ "'" }}{% url 'miaas:index' %}{{ "'" }});
</script>
{% endif %}

{% load staticfiles %}
{% load my_filters %}

{% include 'miaas/template_header.html' %}

<!-- custom css -->


{% include 'miaas/template_nav_physician.html' %}

<div class="container">
    <section class="section section-default">
        <div class="row">
            <div class="col-xs-12 col-title">
                <h2 class="text-primary">Search Medical Image Interpretation Request</h2>
            </div>

            <div class="col-xs-12 col-table">
            {% if interpret_request.request_list %}
                <div class="table-container row">
                    <div class="table-title col-xs-12 col-md-4">Medical Image List</div>
                    <form class="table-search col-xs-12 col-md-8 form-group form-inline" method="get">
                        <button class="btn btn-default pull-right" type="submit">Search</button>
                        <input name="search_keyword" id="inputSearch" type="text" class="form-control pull-right" placeholder="Search">
                        <select name="image_type" id="selectImageType" class="form-control pull-right" style="display: none;">
                            <option>EEG</option>
                            <option>ECG</option>
                            <option>EMG</option>
                            <option>CT</option>
                            <option>MRI</option>
                            <option>Ultrasonography</option>
                            <option>Radiography (X-ray)</option>
                        </select>
                        <select name="image_subject" id="selectSearch" class="form-control pull-right">
                            <option>Request Subject</option>
                            <option>Image Type</option>
                        </select>
                    </form>
                    <table class="table table-striped table-hover col-xs-12">
                        <thead>
                            <td>Request Date</td>
                            <td>Patient</td>
                            <td>Image Type</td>
                            <td>Request Subject</td>
                        </thead>
                        <tbody>
                        {% for request_info in interpret_request.request_list %}
                            <tr onclick="javascript: location.href='{% url 'miaas:interpretation_detail' request_info.intpr_id %}';">
                                <td>{{ request_info.timestamp|datetime_string }}</td>
                                <td>{{ request_info.patient_id }}</td>
                                <td>{{ request_info.image_type }}</td>
                                <td>{{ request_info.subject }}</td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                    <div class="col-xs-12 text-center table-page-container">
{#                    {% for page_num in archive.image_count|get_page_num:10|get_range2 %}#}
{#                        <a class="table-page-number" href="?page_num={{ page_num }}">{{ page_num }}</a>#}
{#                    {% endfor %}#}
                    </div>
                </div>
            {% endif %}
            </div>

        </div>
    </section>
</div>

{% include 'miaas/template_footer.html' %}

<!-- custom javascript -->
<script type="text/javascript">
$('#selectSearch').change(function() {
    if($(this).val() == 'Request Subject') {
        $('#inputSearch').show();
        $('#selectImageType').hide();
    } else if ($(this).val() == 'Image Type') {
        $('#inputSearch').hide();
        $('#selectImageType').show();
    }
});
</script>

</body>
</html>
