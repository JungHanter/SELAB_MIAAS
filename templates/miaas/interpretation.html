{% if not session or session.user_info.user_type != 'patient' %}
<script type="text/javascript">
location.replace({{ "'" }}{% url 'miaas:index' %}{{ "'" }});
</script>
{% endif %}

{% load staticfiles %}
{% load my_filters %}

{% include 'miaas/template_header.html' %}

<!-- custom css -->


{% include 'miaas/template_nav_patient.html' %}

<div class="container">
    <section class="section section-default">
        <div class="row">
            <div class="col-xs-12 col-title">
                <h2 class="text-primary">Interpretations</h2>
            </div>

            <div class="col-xs-12 col-table">
            {% if interpret.interpret_list %}
                <div class="table-container row">
                    <div class="table-title col-xs-12">Interpretation List</div>
                    <table class="table table-striped table-hover col-xs-12">
                        <thead>
                            <td>Upload Date</td>
                            <td>Interpret Date</td>
                            <td>Image Subject</td>
                            <td>Type</td>
                            <td>Level</td>
                            <td>Summary</td>
                            <td>Status</td>
                        </thead>
                        <tbody>
                        {% for itprt in interpret.interpret_list %}
                            <tr onclick="javascript: location.href='{% url 'miaas:interpretation_detail' itprt.id %}';">
                                <td>{{ itprt.upload_date }}</td>
                                <td>{{ itprt.interpret_date }}</td>
                                <td class="bold">{{ itprt.subject }}</td>
                                <td>{{ itprt.type }}</td>
                                <td>{{ itprt.level }}</td>
                                <td>{{ itprt.summary }}</td>
                                <td class="bold interpretation-status-{{ itprt.status }}">{{ itprt.status|get_interpretation_status }}</td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                    <div class="col-xs-12 text-center table-page-container">
                    {% for page_num in interpret.interpret_count|get_page_num:10|get_range2 %}
                        <a class="table-page-number" href="?page_num={{ page_num }}">{{ page_num }}</a>
                    {% endfor %}
                    </div>
                </div>
            {% else %}
                <div class="table-nodata">
                    <h4 class="text-danger">There is no interpretation.</h4>
                    <p>You can request your FIRST Interpretation of a Medical Image.</p>
                    <a class="btn btn-default" href="{% url 'miaas:interpretation_request' %}" type="button">Request New</a>
                </div>
            {% endif %}
            </div>

        {% if interpret.interpret_list %}
            <div class="col-xs-12 col-md-4 col-md-offset-4">
                <a class="btn btn-primary btn-lg btn-block"
                   href="{% url 'miaas:interpretation_request' %}" type="button">Request New Interpretation</a>
            </div>
        {% endif %}
        </div>
    </section>
</div>

{% include 'miaas/template_footer.html' %}

<!-- custom javascript -->


</body>
</html>
