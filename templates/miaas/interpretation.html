{% if session and session.user_info.user_type == 'patient' %}

{% load staticfiles %}
{% load my_filters %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="template of MIAAS">
    <meta name="author" content="Hanter Jung">
{#    <link rel="icon" href="../../favicon.ico">#}

    <!-- Bootstrap -->
    <link rel="stylesheet" type="text/css" href="{% static 'lib/bootstrap/css/bootstrap.css' %}">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link rel="stylesheet" type="text/css" href="{% static 'lib/bootstrap/assets/css/ie10-viewport-bug-workaround.css' %}">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="{% static 'lib/bootstrap/assets/js/ie8-responsive-file-warning.js' %}"></script><![endif]-->
    <script src="{% static 'lib/bootstrap/assets/js/ie-emulation-modes-warning.js' %}"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <link rel="stylesheet" type="text/css" href="{% static 'miass/css/style.css' %}">

    <title>MIAAS: Medical Image Archive & Analytics Service</title>
</head>

<body>

<nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collasped"
                    data-toggle="collapse" data-target="#navbar"
                    aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="{% url 'miaas:index' %}">MIAAS</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li ><a href="{% url 'miaas:profile' %}">Profile</a></li>
                <li ><a href="{% url 'miaas:archive' %}">Archive</a></li>
                <li ><a href="{% url 'miaas:interpretation' %}">Interpretations</a></li>

            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                       aria-expanded="false"><span id="navbar-logined-text">
                        <span>Hi, {{ session.user_info.user_name }} </span></span><span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="#">Account Setting</a></li>
                        <li><a href="#">Logout</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>

<div class="container">
    <section class="section section-default">
        <div class="row">
            <div class="col-xs-12 col-title">
                <h2 class="text-primary">Interpretations</h2>
            </div>

            <div class="col-xs-12 col-table">
            {% if interpret.interpret_list %}
                <div class="table-container row">
                    <div class="table-title col-xs-12">Interpretation List</div>
                    <table class="table table-striped table-hover col-xs-12">
                        <thead>
                            <td>Upload Date</td>
                            <td>Interpret Date</td>
                            <td>Image Subject</td>
                            <td>Type</td>
                            <td>Level</td>
                            <td>Summary</td>
                            <td>Status</td>
                        </thead>
                        <tbody>
                        {% for itprt in interpret.interpret_list %}
                            <tr onclick="javascript: location.href='{% url 'miaas:interpretation_detail' itprt.id %}';">
                                <td>{{ itprt.upload_date }}</td>
                                <td>{{ itprt.interpret_date }}</td>
                                <td class="bold">{{ itprt.subject }}</td>
                                <td>{{ itprt.type }}</td>
                                <td>{{ itprt.level }}</td>
                                <td>{{ itprt.summary }}</td>
                                <td class="bold interpretation-status-{{ itprt.status }}">{{ itprt.status|get_interpretation_status }}</td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                    <div class="col-xs-12 text-center table-page-container">
                    {% for page_num in interpret.interpret_count|get_page_num:10|get_range2 %}
                        <a class="table-page-number" href="?page_num={{ page_num }}">{{ page_num }}</a>
                    {% endfor %}
                    </div>
                </div>
            {% else %}
                <div class="table-nodata">
                    <h4 class="text-danger">There is no interpretation.</h4>
                    <p>You can request your FIRST Interpretation of a Medical Image.</p>
                    <a class="btn btn-default" href="{% url 'miaas:interpretation_request' %}" type="button">Request New</a>
                </div>
            {% endif %}
            </div>

        {% if interpret.interpret_list %}
            <div class="col-xs-12 col-md-4 col-md-offset-4">
                <a class="btn btn-primary btn-lg btn-block"
                   href="{% url 'miaas:interpretation_request' %}" type="button">Request New Interpretation</a>
            </div>
        {% endif %}
        </div>
    </section>
</div>


<script src="{% static 'lib/jquery/jquery-2.2.0.min.js' %}"></script>
<script src="{% static 'lib/bootstrap/js/bootstrap.min.js' %}"></script>
<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<script src="{% static 'lib/bootstrap/assets/js/ie10-viewport-bug-workaround.js' %}"></script>

<script src="{% static 'miass/js/init.js' %}"></script>

</body>
</html>

{% else %}
    <script type="text/javascript">
        location.replace(
                {{ "'" }}{% url 'miaas:signin' %}{{ "'" }}
        );
    </script>
{% endif %}
